<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, landscape=yes">
    <title>HSK 1 Complete (150 Words) - XUSFUNCHINESE</title>
    <style>
        :root {
            --primary: #01579b; 
            --accent: #e1f5fe;  
            --gold: #fbc02d;
            --pinyin: #d0021b; 
            --night-sky: radial-gradient(circle at center, #001f3f 0%, #000510 100%);
        }
        
        body { 
            margin: 0; font-family: "Arial Black", "Segoe UI", Tahoma, sans-serif; 
            background: linear-gradient(135deg, #0277bd 0%, #002f6c 100%); 
            height: 100vh; display: flex; flex-direction: column; overflow: hidden; position: relative;
        }

        #cover-page {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--night-sky); z-index: 5000; display: flex;
            flex-direction: column; justify-content: center; align-items: center;
            cursor: pointer; transition: opacity 0.8s ease-out, visibility 0.8s; overflow: hidden;
        }

        .star {
            position: absolute; top: 50%; left: 50%; width: 2px; height: 2px;
            background: white; border-radius: 50%; box-shadow: 0 0 10px #fff;
            animation: shoot linear infinite;
        }

        @keyframes shoot {
            0% { transform: translate(-50%, -50%) rotate(var(--angle)) translateX(0); opacity: 1; }
            100% { transform: translate(-50%, -50%) rotate(var(--angle)) translateX(1000px); opacity: 0; width: 160px; }
        }

        .cover-content { text-align: center; z-index: 10; padding: 20px; }
        .cover-title { font-size: 10vw; color: var(--gold); line-height: 1.1; margin: 0; font-weight: 900; text-shadow: 0 0 30px rgba(251,192,45,0.8), 0 0 60px rgba(251,192,45,0.4); animation: glow 2s infinite alternate; }
        .cover-subtitle { font-size: 7vw; color: white; margin-top: 5px; font-weight: 900; }
        @keyframes glow { from { transform: scale(1); } to { transform: scale(1.05); } }

        header { 
            background: rgba(255,255,255,0.95); padding: 10px 20px; 
            display: flex; justify-content: space-between; align-items: center; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); z-index: 100; 
        }
        .nav-btns button { 
            padding: 8px 12px; margin-right: 5px; border-radius: 20px; border: 2px solid var(--primary); 
            cursor: pointer; font-weight: bold; background: white; color: var(--primary);
        }
        .active-mode { background: var(--primary) !important; color: white !important; }

        main { flex: 1; display: flex; padding: 20px; gap: 15px; overflow: hidden; }
        #left-panel { flex: 1; background: rgba(255,255,255,0.95); border-radius: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 4px solid var(--accent); }
        #right-panel { flex: 1.6; background: rgba(255,255,255,0.95); border-radius: 30px; padding: 30px; display: flex; flex-direction: column; overflow-y: auto; border: 4px solid var(--accent); position: relative; }

        ruby { ruby-align: center; font-size: 50px; margin: 0 4px; line-height: 2.2; font-weight: 600; }
        rt { font-size: 20px; color: var(--pinyin); font-weight: bold; }
        .eng-hint { display: block; font-size: 26px; color: #333; margin-top: 15px; border-top: 2px dashed #ccc; padding-top: 10px; }
        #emoji-display { font-size: 130px; margin-bottom: 20px; }
        
        .option-btn { background: white; border: 2px solid var(--primary); padding: 15px; margin: 8px 0; border-radius: 15px; cursor: pointer; font-size: 20px; width: 100%; transition: 0.2s; }
        
        #scroll-view { display: none; width: 100%; overflow-y: auto; padding: 30px; background: white; border-radius: 30px; }
        .list-row { border-bottom: 1px solid var(--accent); padding: 15px; cursor: pointer; display: flex; align-items: center; transition: background 0.2s; }
        .list-row:hover { background: var(--accent); }
        .hidden { display: none !important; }
        #timer-display { font-size: 24px; color: #d32f2f; font-weight: bold; margin-right: 15px; }
    </style>
</head>
<body>

<div id="cover-page" onclick="enterApp()">
    <div id="star-container"></div>
    <div class="cover-content">
        <h1 class="cover-title">HSK 1</h1>
        <div class="cover-subtitle">Complete 150 Words</div>
        <div style="color:white; margin-top:20px; letter-spacing:3px;">CLICK TO START</div>
    </div>
</div>

<header>
    <div class="nav-btns">
        <button onclick="setMode('study')" id="btn-study">ğŸ“– Learn</button>
        <button onclick="setMode('review')" id="btn-review">ğŸ”„ Review</button>
        <button onclick="setMode('quiz')" id="btn-quiz">âš¡ Quiz</button>
        <button onclick="setMode('rush')" id="btn-rush">ğŸ”¥ Rush</button>
        <button onclick="setMode('mistakes')" id="btn-mistakes">âŒ Mistakes</button>
        <button onclick="setMode('list')" id="btn-list">ğŸ“œ List</button>
    </div>
    <div style="display: flex; align-items: center;">
        <span id="timer-display" class="hidden">00:30</span>
        <span style="font-weight: bold; color: var(--primary);">Score: <span id="score-val">0</span></span>
    </div>
</header>

<main>
    <div id="main-ui" style="display: flex; width: 100%; gap: 15px;">
        <div id="left-panel">
            <div id="emoji-display">âœ¨</div>
            <button onclick="speakItem(true)" style="padding: 15px 40px; border-radius: 50px; cursor: pointer; background: var(--primary); color: white; border: none; font-weight: bold; font-size: 20px;">ğŸ”Š Play Sound</button>
        </div>
        <div id="right-panel">
            <div id="display-area"></div>
            <div id="hint-box" style="margin-top:20px; padding:15px; background:#fffde7; border-left:8px solid var(--gold); border-radius:12px; cursor:pointer;" class="hidden" onclick="speakExample()"></div>
            <div id="interaction-area" style="margin-top: 15px;"></div>
        </div>
    </div>
    <div id="scroll-view"></div>
</main>

<script>
    const database = [
        ["æˆ‘", "wÇ’", "I / me", "ğŸ™‹â€â™‚ï¸", {cn: "æˆ‘æ˜¯è€å¸ˆã€‚", py: "wÇ’ shÃ¬ lÇo shÄ«", en: "I am a teacher."}],
        ["ä½ ", "nÇ", "you", "ğŸ‘¤", {cn: "ä½ å¥½ï¼", py: "nÇ hÇo", en: "Hello!"}],
        ["ä»–", "tÄ", "he", "ğŸ‘¨", {cn: "ä»–æ˜¯å­¦ç”Ÿã€‚", py: "tÄ shÃ¬ xuÃ© sheng", en: "He is a student."}],
        ["å¥¹", "tÄ", "she", "ğŸ‘©", {cn: "å¥¹æ˜¯æˆ‘çš„æœ‹å‹ã€‚", py: "tÄ shÃ¬ wÇ’ de pÃ©ng you", en: "She is my friend."}],
        ["æˆ‘ä»¬", "wÇ’ men", "we", "ğŸ‘¥", {cn: "æˆ‘ä»¬å»å­¦æ ¡ã€‚", py: "wÇ’ men qÃ¹ xuÃ© xiÃ o", en: "We go to school."}],
        ["å¥½", "hÇo", "good", "ğŸ‘", {cn: "å¾ˆå¥½ã€‚", py: "hÄ›n hÇo", en: "Very good."}],
        ["æ˜¯", "shÃ¬", "to be", "âœ…", {cn: "ä½ æ˜¯è°ï¼Ÿ", py: "nÇ shÃ¬ shÃ©i", en: "Who are you?"}],
        ["ä¸", "bÃ¹", "not", "âŒ", {cn: "æˆ‘ä¸å»ã€‚", py: "wÇ’ bÃº qÃ¹", en: "I'm not going."}],
        ["è°¢è°¢", "xiÃ¨ xie", "thanks", "ğŸ™", {cn: "è°¢è°¢ä½ ã€‚", py: "xiÃ¨ xie nÇ", en: "Thank you."}],
        ["å†è§", "zÃ i jiÃ n", "goodbye", "ğŸ‘‹", {cn: "å†è§ï¼", py: "zÃ i jiÃ n", en: "Goodbye!"}],
        ["è¯·", "qÇng", "please", "ğŸ™‡", {cn: "è¯·åã€‚", py: "qÇng zuÃ²", en: "Please sit down."}],
        ["å¯¹ä¸èµ·", "duÃ¬ bu qÇ", "sorry", "ğŸ™‡â€â™‚ï¸", {cn: "å¯¹ä¸èµ·ã€‚", py: "duÃ¬ bu qÇ", en: "I am sorry."}],
        ["è€å¸ˆ", "lÇo shÄ«", "teacher", "ğŸ‘¨â€ğŸ«", {cn: "è€å¸ˆå¥½ï¼", py: "lÇo shÄ« hÇo", en: "Hello teacher!"}],
        ["å­¦ç”Ÿ", "xuÃ© sheng", "student", "ğŸ§‘â€ğŸ“", {cn: "ä»–æ˜¯å­¦ç”Ÿã€‚", py: "tÄ shÃ¬ xuÃ© sheng", en: "He is a student."}],
        ["æœ‹å‹", "pÃ©ng you", "friend", "ğŸ‘«", {cn: "æˆ‘çš„æœ‹å‹ã€‚", py: "wÇ’ de pÃ©ng you", en: "My friend."}],
        ["åŒ»ç”Ÿ", "yÄ« shÄ“ng", "doctor", "ğŸ‘¨â€âš•ï¸", {cn: "ä»–æ˜¯åŒ»ç”Ÿã€‚", py: "tÄ shÃ¬ yÄ« shÄ“ng", en: "He is a doctor."}],
        ["å®¶", "jiÄ", "home", "ğŸ ", {cn: "æˆ‘å›å®¶ã€‚", py: "wÇ’ huÃ­ jiÄ", en: "I go home."}],
        ["å­¦æ ¡", "xuÃ© xiÃ o", "school", "ğŸ«", {cn: "æˆ‘å»å­¦æ ¡ã€‚", py: "wÇ’ qÃ¹ xuÃ© xiÃ o", en: "I go to school."}],
        ["å•†åº—", "shÄng diÃ n", "shop", "ğŸ›’", {cn: "å•†åº—åœ¨é‚£å„¿ã€‚", py: "shÄng diÃ n zÃ i nÃ  r", en: "The shop is there."}],
        ["ç°åœ¨", "xiÃ n zÃ i", "now", "â°", {cn: "ç°åœ¨å‡ ç‚¹ï¼Ÿ", py: "xiÃ n zÃ i jÇ diÇn", en: "What time is it now?"}],
        ["ä»Šå¤©", "jÄ«n tiÄn", "today", "ğŸ“…", {cn: "ä»Šå¤©æ˜ŸæœŸä¸€ã€‚", py: "jÄ«n tiÄn xÄ«ng qÄ« yÄ«", en: "Today is Monday."}],
        ["æ˜¨å¤©", "zuÃ³ tiÄn", "yesterday", "âª", {cn: "æ˜¨å¤©æ˜¯å‡ å·ï¼Ÿ", py: "zuÃ³ tiÄn shÃ¬ jÇ hÃ o", en: "What date was yesterday?"}],
        ["æ˜å¤©", "mÃ­ng tiÄn", "tomorrow", "â©", {cn: "æ˜å¤©è§ã€‚", py: "mÃ­ng tiÄn jiÃ n", en: "See you tomorrow."}],
        ["å¹´", "niÃ¡n", "year", "ğŸ—“ï¸", {cn: "ä»Šå¹´æ˜¯å“ªå¹´ï¼Ÿ", py: "jÄ«n niÃ¡n shÃ¬ nÇ niÃ¡n", en: "What year is this year?"}],
        ["æœˆ", "yuÃ¨", "month", "ğŸŒ™", {cn: "ä¸€æœˆä¸€å·ã€‚", py: "yÄ« yuÃ¨ yÄ« hÃ o", en: "January 1st."}],
        ["å·", "hÃ o", "date", "ğŸ”¢", {cn: "ä»Šå¤©ä¸‰å·ã€‚", py: "jÄ«n tiÄn sÄn hÃ o", en: "Today is the 3rd."}],
        ["ç‚¹", "diÇn", "o'clock", "ğŸ•’", {cn: "ä¸‹åˆä¸‰ç‚¹ã€‚", py: "xiÃ  wÇ” sÄn diÇn", en: "3 PM."}],
        ["åˆ†é’Ÿ", "fÄ“n zhÅng", "minute", "â±ï¸", {cn: "äº”åˆ†é’Ÿã€‚", py: "wÇ” fÄ“n zhÅng", en: "Five minutes."}],
        ["é’±", "qiÃ¡n", "money", "ğŸ’°", {cn: "å¤šå°‘é’±ï¼Ÿ", py: "duÅ shao qiÃ¡n", en: "How much money?"}],
        ["æ°´", "shuÇ", "water", "ğŸ’§", {cn: "å–æ°´ã€‚", py: "hÄ“ shuÇ", en: "Drink water."}],
        ["èŒ¶", "chÃ¡", "tea", "ğŸµ", {cn: "æˆ‘æƒ³å–èŒ¶ã€‚", py: "wÇ’ xiÇng hÄ“ chÃ¡", en: "I want to drink tea."}],
        ["æ°´æœ", "shuÇ guÇ’", "fruit", "ğŸ", {cn: "åƒæ°´æœã€‚", py: "chÄ« shuÇ guÇ’", en: "Eat fruit."}],
        ["è‹¹æœ", "pÃ­ng guÇ’", "apple", "ğŸ", {cn: "ä¹°è‹¹æœã€‚", py: "mÇi pÃ­ng guÇ’", en: "Buy apples."}],
        ["æ¯å­", "bÄ“i zi", "cup", "ğŸ¥›", {cn: "è¿™æ˜¯æˆ‘çš„æ¯å­ã€‚", py: "zhÃ¨ shÃ¬ wÇ’ de bÄ“i zi", en: "This is my cup."}],
        ["ä¹¦", "shÅ«", "book", "ğŸ“–", {cn: "çœ‹ä¹¦ã€‚", py: "kÃ n shÅ«", en: "Read a book."}],
        ["æ¤…å­", "yÇ zi", "chair", "ğŸª‘", {cn: "æ¡Œå­å’Œæ¤…å­ã€‚", py: "zhuÅ zi hÃ© yÇ zi", en: "Table and chair."}],
        ["æ¡Œå­", "zhuÅ zi", "table", "ğŸ±", {cn: "æ¡Œå­ä¸Šæœ‰ä¹¦ã€‚", py: "zhuÅ zi shang yÇ’u shÅ«", en: "There's a book on the table."}],
        ["çŒ«", "mÄo", "cat", "ğŸ±", {cn: "å°çŒ«ã€‚", py: "xiÇo mÄo", en: "Little cat."}],
        ["ç‹—", "gÇ’u", "dog", "ğŸ¶", {cn: "ä¸€åªå°ç‹—ã€‚", py: "yÃ¬ zhÄ« xiÇo gÇ’u", en: "A little dog."}],
        ["åŒ—äº¬", "bÄ›i jÄ«ng", "Beijing", "ğŸ™ï¸", {cn: "ä»–åœ¨åŒ—äº¬ã€‚", py: "tÄ zÃ i bÄ›i jÄ«ng", en: "He is in Beijing."}],
        ["çœ‹", "kÃ n", "look", "ğŸ‘ï¸", {cn: "çœ‹ç”µè§†ã€‚", py: "kÃ n diÃ n shÃ¬", en: "Watch TV."}],
        ["å¬", "tÄ«ng", "listen", "ğŸ‘‚", {cn: "å¬éŸ³ä¹ã€‚", py: "tÄ«ng yÄ«n yuÃ¨", en: "Listen to music."}],
        ["è¯´è¯", "shuÅ huÃ ", "speak", "ğŸ’¬", {cn: "ä»–åœ¨è¯´è¯ã€‚", py: "tÄ zÃ i shuÅ huÃ ", en: "He is speaking."}],
        ["è¯»", "dÃº", "read", "ğŸ“š", {cn: "è¯»æ±‰è¯­ã€‚", py: "dÃº hÃ n yÇ”", en: "Read Chinese."}],
        ["å†™", "xiÄ›", "write", "âœï¸", {cn: "å†™æ±‰å­—ã€‚", py: "xiÄ› hÃ n zÃ¬", en: "Write Chinese characters."}],
        ["å–", "hÄ“", "drink", "ğŸ¹", {cn: "å–ç‚¹å„¿æ°´ã€‚", py: "hÄ“ diÇnr shuÇ", en: "Drink some water."}],
        ["åƒ", "chÄ«", "eat", "ğŸ±", {cn: "åƒç±³é¥­ã€‚", py: "chÄ« mÇ fÃ n", en: "Eat rice."}],
        ["å¼€", "kÄi", "drive / open", "ğŸš—", {cn: "å¼€è½¦ã€‚", py: "kÄi chÄ“", en: "Drive a car."}],
        ["å", "zuÃ²", "sit", "ğŸ§", {cn: "åè½¦ã€‚", py: "zuÃ² chÄ“", en: "Take a bus/car."}],
        ["ä¹°", "mÇi", "buy", "ğŸ›ï¸", {cn: "ä¹°è¡£æœã€‚", py: "mÇi yÄ« fu", en: "Buy clothes."}],
        ["æƒ³", "xiÇng", "want / think", "ğŸ’­", {cn: "æˆ‘æƒ³å»åŒ—äº¬ã€‚", py: "wÇ’ xiÇng qÃ¹ bÄ›i jÄ«ng", en: "I want to go to Beijing."}],
        ["è¯´", "shuÅ", "speak / say", "ğŸ—£ï¸", {cn: "è¯·è¯´æ±‰è¯­ã€‚", py: "qÇng shuÅ hÃ n yÇ”", en: "Please speak Chinese."}],
        ["çœ‹", "kÃ n", "look / watch", "ğŸ‘ï¸", {cn: "æˆ‘çœ‹ä¹¦ã€‚", py: "wÇ’ kÃ n shÅ«", en: "I read a book."}],
        ["å¬", "tÄ«ng", "listen", "ğŸ‘‚", {cn: "å¬éŸ³ä¹ã€‚", py: "tÄ«ng yÄ«n yuÃ¨", en: "Listen to music."}],
        ["è¯»", "dÃº", "read", "ğŸ“–", {cn: "è¯»æ±‰è¯­ã€‚", py: "dÃº hÃ n yÇ”", en: "Read Chinese."}],
        ["å†™", "xiÄ›", "write", "âœï¸", {cn: "å†™æ±‰å­—ã€‚", py: "xiÄ› hÃ n zÃ¬", en: "Write Chinese characters."}],
        ["å«", "jiÃ o", "be called", "ğŸ·ï¸", {cn: "ä½ å«ä»€ä¹ˆåå­—ï¼Ÿ", py: "nÇ jiÃ o shÃ©n me mÃ­ng zi", en: "What is your name?"}],
        ["æ¥", "lÃ¡i", "come", "ğŸƒ", {cn: "ä»–æ¥å­¦æ ¡äº†ã€‚", py: "tÄ lÃ¡i xuÃ© xiÃ o le", en: "He came to school."}],
        ["å›", "huÃ­", "return", "â†©ï¸", {cn: "æˆ‘å›å®¶ã€‚", py: "wÇ’ huÃ­ jiÄ", en: "I go home."}],
        ["å»", "qÃ¹", "go", "ğŸš¶", {cn: "æˆ‘å»å•†åº—ã€‚", py: "wÇ’ qÃ¹ shÄng diÃ n", en: "I go to the shop."}],
        ["çˆ±", "Ã i", "love", "â¤ï¸", {cn: "æˆ‘çˆ±æˆ‘çš„å®¶ã€‚", py: "wÇ’ Ã i wÇ’ de jiÄ", en: "I love my family."}],
        ["åƒ", "chÄ«", "eat", "ğŸ¥¢", {cn: "åƒç±³é¥­ã€‚", py: "chÄ« mÇ fÃ n", en: "Eat rice."}],
        ["å–", "hÄ“", "drink", "ğŸµ", {cn: "å–ç‚¹å„¿æ°´ã€‚", py: "hÄ“ diÇnr shuÇ", en: "Drink some water."}],
        ["ç¡è§‰", "shuÃ¬ jiÃ o", "sleep", "ğŸ˜´", {cn: "æˆ‘è¦ç¡è§‰ã€‚", py: "wÇ’ yÃ o shuÃ¬ jiÃ o", en: "I want to sleep."}],
        ["æ‰“ç”µè¯", "dÇ diÃ n huÃ ", "make a call", "ğŸ“", {cn: "ä»–åœ¨æ‰“ç”µè¯ã€‚", py: "tÄ zÃ i dÇ diÃ n huÃ ", en: "He is making a phone call."}],
        ["åš", "zuÃ²", "do / make", "ğŸ› ï¸", {cn: "åšé¥­ã€‚", py: "zuÃ² fÃ n", en: "Cook food."}],
        ["ä¹°", "mÇi", "buy", "ğŸ›ï¸", {cn: "ä¹°è¡£æœã€‚", py: "mÇi yÄ« fu", en: "Buy clothes."}],
        ["å¼€", "kÄi", "open / drive", "ğŸš—", {cn: "å¼€è½¦ã€‚", py: "kÄi chÄ“", en: "Drive a car."}],
        ["å", "zuÃ²", "sit", "ğŸª‘", {cn: "è¯·åã€‚", py: "qÇng zuÃ²", en: "Please sit down."}],
        ["ä½", "zhÃ¹", "live", "ğŸ ", {cn: "ä½ ä½åœ¨å“ªå„¿ï¼Ÿ", py: "nÇ zhÃ¹ zÃ i nÇ r", en: "Where do you live?"}],
        ["å­¦ä¹ ", "xuÃ© xÃ­", "study", "ğŸ“š", {cn: "å­¦ä¹ æ±‰è¯­ã€‚", py: "xuÃ© xÃ­ hÃ n yÇ”", en: "Study Chinese."}],
        ["å·¥ä½œ", "gÅng zuÃ²", "work", "ğŸ’¼", {cn: "ä»–åœ¨å·¥ä½œã€‚", py: "tÄ zÃ i gÅng zuÃ²", en: "He is working."}],
        ["ä¸‹é›¨", "xiÃ  yÇ”", "rain", "ğŸŒ§ï¸", {cn: "ä¸‹é›¨äº†ã€‚", py: "xiÃ  yÇ” le", en: "It's raining."}],
        ["è®¤è¯†", "rÃ¨n shi", "know (people)", "ğŸ¤", {cn: "è®¤è¯†ä½ å¾ˆé«˜å…´ã€‚", py: "rÃ¨n shi nÇ hÄ›n gÄo xÃ¬ng", en: "Glad to meet you."}],
        ["å¤§", "dÃ ", "big", "ğŸ˜", {cn: "è¿™ä¸ªè‹¹æœå¾ˆå¤§ã€‚", py: "zhÃ¨ ge pÃ­ng guÇ’ hÄ›n dÃ ", en: "This apple is big."}],
        ["å°", "xiÇo", "small", "ğŸ­", {cn: "å°çŒ«ã€‚", py: "xiÇo mÄo", en: "Little cat."}],
        ["å¤š", "duÅ", "many", "ğŸ”¢", {cn: "è¿™é‡Œäººå¾ˆå¤šã€‚", py: "zhÃ¨ lÇ rÃ©n hÄ›n duÅ", en: "There are many people here."}],
        ["å°‘", "shÇo", "few", "ğŸ¤", {cn: "é’±å¾ˆå°‘ã€‚", py: "qiÃ¡n hÄ›n shÇo", en: "Very little money."}],
        ["å†·", "lÄ›ng", "cold", "â„ï¸", {cn: "ä»Šå¤©å¾ˆå†·ã€‚", py: "jÄ«n tiÄn hÄ›n lÄ›ng", en: "Today is cold."}],
        ["çƒ­", "rÃ¨", "hot", "â˜€ï¸", {cn: "ä»Šå¤©å¾ˆçƒ­ã€‚", py: "jÄ«n tiÄn hÄ›n rÃ¨", en: "Today is hot."}],
        ["é«˜å…´", "gÄo xÃ¬ng", "happy", "ğŸ˜Š", {cn: "æˆ‘å¾ˆé«˜å…´ã€‚", py: "wÇ’ hÄ›n gÄo xÃ¬ng", en: "I am happy."}],
        ["æ¼‚äº®", "piÃ o liang", "beautiful", "ğŸ’…", {cn: "è¡£æœå¾ˆæ¼‚äº®ã€‚", py: "yÄ« fu hÄ›n piÃ o liang", en: "The clothes are beautiful."}],
        ["æ¡Œå­", "zhuÅ zi", "table", "ğŸ±", {cn: "æ¡Œå­ä¸Šæœ‰ä¹¦ã€‚", py: "zhuÅ zi shang yÇ’u shÅ«", en: "Book on the table."}],
        ["æ¤…å­", "yÇ zi", "chair", "ğŸª‘", {cn: "ååœ¨æ¤…å­ä¸Šã€‚", py: "zuÃ² zÃ i yÇ zi shang", en: "Sit on the chair."}],
        ["æ¯å­", "bÄ“i zi", "cup", "ğŸ¥›", {cn: "ä¸€ä¸ªæ¯å­ã€‚", py: "yÃ­ ge bÄ“i zi", en: "A cup."}],
        ["ç”µè„‘", "diÃ n nÇo", "computer", "ğŸ’»", {cn: "è¿™æ˜¯æˆ‘çš„ç”µè„‘ã€‚", py: "zhÃ¨ shÃ¬ wÇ’ de diÃ n nÇo", en: "This is my computer."}],
        ["ç”µè§†", "diÃ n shÃ¬", "TV", "ğŸ“º", {cn: "çœ‹ç”µè§†ã€‚", py: "kÃ n diÃ n shÃ¬", en: "Watch TV."}],
        ["ç”µå½±", "diÃ n yÇng", "movie", "ğŸ¬", {cn: "çœ‹ç”µå½±ã€‚", py: "kÃ n diÃ n yÇng", en: "Watch a movie."}],
        ["å¤©æ°”", "tiÄn qÃ¬", "weather", "ğŸŒ¤ï¸", {cn: "å¤©æ°”å¾ˆå¥½ã€‚", py: "tiÄn qÃ¬ hÄ›n hÇo", en: "The weather is good."}],
        ["çŒ«", "mÄo", "cat", "ğŸ±", {cn: "æˆ‘å–œæ¬¢çŒ«ã€‚", py: "wÇ’ xÇ huan mÄo", en: "I like cats."}],
        ["ç‹—", "gÇ’u", "dog", "ğŸ¶", {cn: "ä¸€åªå°ç‹—ã€‚", py: "yÃ¬ zhÄ« xiÇo gÇ’u", en: "A little dog."}],
        ["ä¸œè¥¿", "dÅng xi", "thing", "ğŸ“¦", {cn: "ä¹°ä¸œè¥¿ã€‚", py: "mÇi dÅng xi", en: "Buy things."}],
        ["ç±³é¥­", "mÇ fÃ n", "rice", "ğŸš", {cn: "åƒç±³é¥­ã€‚", py: "chÄ« mÇ fÃ n", en: "Eat rice."}],
        ["æ°´æœ", "shuÇ guÇ’", "fruit", "ğŸ", {cn: "ä¹°æ°´æœã€‚", py: "mÇi shuÇ guÇ’", en: "Buy fruit."}],
        ["è‹¹æœ", "pÃ­ng guÇ’", "apple", "ğŸ", {cn: "å¤§è‹¹æœã€‚", py: "dÃ  pÃ­ng guÇ’", en: "Big apple."}],
        ["èŒ¶", "chÃ¡", "tea", "ğŸµ", {cn: "å–èŒ¶ã€‚", py: "hÄ“ chÃ¡", en: "Drink tea."}],
        ["èœ", "cÃ i", "dish / vegetable", "ğŸ¥—", {cn: "ä¸­å›½èœã€‚", py: "zhÅng guÃ³ cÃ i", en: "Chinese food."}],
        ["è¡£æœ", "yÄ« fu", "clothes", "ğŸ‘•", {cn: "æ¼‚äº®è¡£æœã€‚", py: "yÄ« fu hÄ›n piÃ o liang", en: "Beautiful clothes."}],
        ["æ°´", "shuÇ", "water", "ğŸ’§", {cn: "å–æ°´ã€‚", py: "hÄ“ shuÇ", en: "Drink water."}],
        ["æ±‰è¯­", "hÃ n yÇ”", "Chinese language", "ğŸ‡¨ğŸ‡³", {cn: "è¯´æ±‰è¯­ã€‚", py: "shuÅ hÃ n yÇ”", en: "Speak Chinese."}],
        ["åå­—", "mÃ­ng zi", "name", "ğŸ“›", {cn: "ä½ çš„åå­—ã€‚", py: "nÇ de mÃ­ng zi", en: "Your name."}],
        ["å­—", "zÃ¬", "character", "ğŸ”£", {cn: "è¿™ä¸ªå­—ã€‚", py: "zhÃ¨ ge zÃ¬", en: "This character."}],
        ["é’±", "qiÃ¡n", "money", "ğŸ’°", {cn: "å¤šå°‘é’±ï¼Ÿ", py: "duÅ shao qiÃ¡n", en: "How much money?"}],
        ["ä»€ä¹ˆ", "shÃ©n me", "what", "â“", {cn: "æ˜¯ä»€ä¹ˆï¼Ÿ", py: "shÃ¬ shÃ©n me", en: "What is it?"}],
        ["å¤šå°‘", "duÅ shao", "how many", "ğŸ”¢", {cn: "å¤šå°‘äººï¼Ÿ", py: "duÅ shao rÃ©n", en: "How many people?"}],
        ["å‡ ", "jÇ", "how many (<10)", "ğŸ”¢", {cn: "å‡ ç‚¹ï¼Ÿ", py: "jÇ diÇn", en: "What time?"}],
        ["æ€ä¹ˆ", "zÄ›n me", "how", "ğŸ¤”", {cn: "æ€ä¹ˆå»ï¼Ÿ", py: "zÄ›n me qÃ¹", en: "How to go?"}],
        ["æ€ä¹ˆæ ·", "zÄ›n me yÃ ng", "how about", "ğŸ§", {cn: "å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ", py: "tiÄn qÃ¬ zÄ›n me yÃ ng", en: "How is the weather?"}],
        ["è°", "shÃ©i", "who", "ğŸ‘¤", {cn: "ä»–æ˜¯è°ï¼Ÿ", py: "tÄ shÃ¬ shÃ©i", en: "Who is he?"}],
        ["åœ¨å“ªå„¿", "zÃ i nÇ r", "where", "ğŸ“", {cn: "ä½ åœ¨å“ªå„¿ï¼Ÿ", py: "nÇ zÃ i nÇ r", en: "Where are you?"}],
        ["è¿™", "zhÃ¨", "this", "ğŸ‘ˆ", {cn: "è¿™æ˜¯ä¹¦ã€‚", py: "zhÃ¨ shÃ¬ shÅ«", en: "This is a book."}],
        ["é‚£", "nÃ ", "that", "ğŸ‘‰", {cn: "é‚£æ˜¯è°ï¼Ÿ", py: "nÃ  shÃ¬ shÃ©i", en: "Who is that?"}],
        ["å“ª", "nÇ", "which", "ğŸš©", {cn: "å“ªä¸ªäººï¼Ÿ", py: "nÇ ge rÃ©n", en: "Which person?"}],
        ["è¿™é‡Œ", "zhÃ¨ lÇ", "here", "â¬‡ï¸", {cn: "åœ¨è¿™é‡Œã€‚", py: "zÃ i zhÃ¨ lÇ", en: "It's here."}],
        ["é‚£é‡Œ", "nÃ  lÇ", "there", "â†—ï¸", {cn: "åœ¨å¤–é¢é‚£é‡Œã€‚", py: "zÃ i nÃ  lÇ", en: "It's over there."}],
        ["æ²¡å…³ç³»", "mÃ©i guÄn xi", "it's okay", "ğŸ‘Œ", {cn: "æ²¡å…³ç³»ã€‚", py: "mÃ©i guÄn xi", en: "It doesn't matter."}],
        ["ä¸å®¢æ°”", "bÃº kÃ¨ qi", "you're welcome", "ğŸ˜Š", {cn: "ä¸å®¢æ°”ã€‚", py: "bÃº kÃ¨ qi", en: "You're welcome."}],
        ["è°¢è°¢", "xiÃ¨ xie", "thanks", "ğŸ™", {cn: "è°¢è°¢è€å¸ˆã€‚", py: "xiÃ¨ xie lÇo shÄ«", en: "Thanks teacher."}],
        ["å†è§", "zÃ i jiÃ n", "goodbye", "ğŸ‘‹", {cn: "å†è§ï¼", py: "zÃ i jiÃ n", en: "Goodbye!"}],
        ["è¯·", "qÇng", "please", "ğŸ™‡", {cn: "è¯·åã€‚", py: "qÇng zuÃ²", en: "Please sit down."}],
        ["å¯¹ä¸èµ·", "duÃ¬ bu qÇ", "sorry", "ğŸ™‡â€â™‚ï¸", {cn: "å¯¹ä¸èµ·ã€‚", py: "duÃ¬ bu qÇ", en: "I am sorry."}],
        ["å—", "ma", "question particle", "â”", {cn: "å¥½å—ï¼Ÿ", py: "hÇo ma", en: "Okay?"}],
        ["å‘¢", "ne", "particle", "â“", {cn: "ä½ å‘¢ï¼Ÿ", py: "nÇ ne", en: "And you?"}],
        ["å¤ª", "tÃ i", "too / very", "â—", {cn: "å¤ªå¥½äº†ï¼", py: "tÃ i hÇo le", en: "That's great!"}],
        ["å¾ˆ", "hÄ›n", "very", "â¬†ï¸", {cn: "å¾ˆå¤§ã€‚", py: "hÄ›n dÃ ", en: "Very big."}],
        ["éƒ½", "dÅu", "all", "â™¾ï¸", {cn: "æˆ‘ä»¬éƒ½å»ã€‚", py: "wÇ’ men dÅu qÃ¹", en: "We all go."}],
        ["å’Œ", "hÃ©", "and", "â•", {cn: "æˆ‘å’Œä½ ã€‚", py: "wÇ’ hÃ© nÇ", en: "Me and you."}],
        ["åœ¨", "zÃ i", "at / in", "ğŸ“Œ", {cn: "ä»–åœ¨å®¶ã€‚", py: "tÄ zÃ i jiÄ", en: "He is at home."}],
        ["çš„", "de", "possessive", "ğŸ“", {cn: "æˆ‘çš„ä¹¦ã€‚", py: "wÇ’ de shÅ«", en: "My book."}],
        ["äº†", "le", "completion", "ğŸ", {cn: "æˆ‘åƒé¥­äº†ã€‚", py: "wÇ’ chÄ« fÃ n le", en: "I ate."}],
        ["å–‚", "wÃ©i", "hello (phone)", "ğŸ“", {cn: "å–‚ï¼Œä½ å¥½ã€‚", py: "wÃ©i, nÇ hÇo", en: "Hello?"}],
        ["åŒ»ç”Ÿ", "yÄ« shÄ“ng", "doctor", "ğŸ‘¨â€âš•ï¸", {cn: "ä»–æ˜¯åŒ»ç”Ÿã€‚", py: "tÄ shÃ¬ yÄ« shÄ“ng", en: "He is a doctor."}],
        ["åŒ»é™¢", "yÄ« yuÃ n", "hospital", "ğŸ¥", {cn: "ä»–åœ¨åŒ»é™¢ã€‚", py: "tÄ zÃ i yÄ« yuÃ n", en: "He is in the hospital."}],
        ["åŒ—äº¬", "bÄ›i jÄ«ng", "Beijing", "ğŸ™ï¸", {cn: "æˆ‘åœ¨åŒ—äº¬ã€‚", py: "wÇ’ zÃ i bÄ›i jÄ«ng", en: "I am in Beijing."}],
        ["ä¸­å›½", "zhÅng guÃ³", "China", "ğŸ‡¨ğŸ‡³", {cn: "ä¸­å›½èœã€‚", py: "zhÅng guÃ³ cÃ i", en: "Chinese food."}],
        ["é‡Œ", "lÇ", "inside", "ğŸ“¦", {cn: "å®¶é‡Œã€‚", py: "jiÄ lÇ", en: "Inside the home."}],
        ["ä¸Š", "shÃ ng", "up / on", "â¬†ï¸", {cn: "æ¡Œå­ä¸Šã€‚", py: "zhuÅ zi shang", en: "On the table."}],
        ["ä¸‹", "xiÃ ", "down / under", "â¬‡ï¸", {cn: "æ¡Œå­ä¸‹ã€‚", py: "zhuÅ zi xiÃ ", en: "Under the table."}],
        ["å‰", "qiÃ¡n", "front", "å‰è¿›", {cn: "å‰é¢ã€‚", py: "qiÃ¡n miÃ n", en: "In front."}],
        ["å", "hÃ²u", "back / behind", "â¬…ï¸", {cn: "åé¢ã€‚", py: "hÃ²u miÃ n", en: "Behind."}],
        ["ä¸€ä¸ª", "yÃ­ ge", "one piece", "1ï¸âƒ£", {cn: "ä¸€ä¸ªæ¯å­ã€‚", py: "yÃ­ ge bÄ“i zi", en: "A cup."}],
        ["ä¸€äº›", "yÃ¬ xiÄ“", "some", "ğŸ”¢", {cn: "ä¸€äº›è‹¹æœã€‚", py: "yÃ¬ xiÄ“ pÃ­ng guÇ’", en: "Some apples."}],
        ["åˆ†é’Ÿ", "fÄ“n zhÅng", "minute", "â±ï¸", {cn: "äº”åˆ†é’Ÿã€‚", py: "wÇ” fÄ“n zhÅng", en: "Five minutes."}],
        ["ç°åœ¨", "xiÃ n zÃ i", "now", "â°", {cn: "ç°åœ¨ä¸‰ç‚¹ã€‚", py: "xiÃ n zÃ i sÄn diÇn", en: "It's 3 o'clock now."}],
        ["ä»Šå¤©", "jÄ«n tiÄn", "today", "ğŸ“…", {cn: "ä»Šå¤©æ˜ŸæœŸä¸€ã€‚", py: "jÄ«n tiÄn xÄ«ng qÄ« yÄ«", en: "Today is Monday."}],
        ["æ˜¨å¤©", "zuÃ³ tiÄn", "yesterday", "âª", {cn: "æ˜¨å¤©å‡ å·ï¼Ÿ", py: "zuÃ³ tiÄn jÇ hÃ o", en: "What date was yesterday?"}],
        ["æ˜å¤©", "mÃ­ng tiÄn", "tomorrow", "â©", {cn: "æ˜å¤©è§ã€‚", py: "mÃ­ng tiÄn jiÃ n", en: "See you tomorrow."}],
        ["æ˜ŸæœŸ", "xÄ«ng qÄ«", "week", "ğŸ—“ï¸", {cn: "æ˜ŸæœŸäº”ã€‚", py: "xÄ«ng qÄ« wÇ”", en: "Friday."}],
        ["ç‚¹", "diÇn", "o'clock", "ğŸ•’", {cn: "åç‚¹ã€‚", py: "shÃ­ diÇn", en: "10 o'clock."}]
    ];

    let currentMode = 'study', currentIndex = 0, score = 0, timer = null, timeLeft = 30;
    let mistakes = [];  // [{index: number, isSentence: boolean, isEnToCn: boolean}]

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playEffect(type) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.connect(gain); gain.connect(audioCtx.destination);
        if(type === 'win') {
            osc.frequency.setValueAtTime(987, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1318, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
        } else {
            osc.type = 'sawtooth'; osc.frequency.setValueAtTime(220, audioCtx.currentTime);
            osc.frequency.linearRampToValueAtTime(110, audioCtx.currentTime + 0.2);
            gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
        }
        osc.start(); osc.stop(audioCtx.currentTime + 0.3);
    }

    function initStars() {
        const container = document.getElementById('star-container');
        for(let i=0; i<100; i++) {
            let s = document.createElement('div'); s.className = 'star';
            s.style.setProperty('--angle', Math.random() * 360 + 'deg');
            s.style.animationDuration = Math.random() * 1.5 + 0.8 + 's';
            container.appendChild(s);
        }
    }

    function enterApp() {
        document.getElementById('cover-page').style.opacity = '0';
        setTimeout(() => { document.getElementById('cover-page').style.visibility = 'hidden'; }, 800);
        setMode('study');
    }

    function speakText(text, callback = null) {
        window.speechSynthesis.cancel();
        const m = new SpeechSynthesisUtterance(text);
        m.lang = 'zh-CN'; m.rate = 0.85;
        if (callback) m.onend = callback;
        window.speechSynthesis.speak(m);
    }

    function speakItem(withExample = false) {
        const itemIndex = currentMode === 'mistakes' ? mistakes[currentIndex].index : currentIndex;
        const item = database[itemIndex];
        if (withExample) speakText(item[0], () => setTimeout(() => speakText(item[4].cn), 400));
        else speakText(item[0]);
    }

    function speakExample() {
        const itemIndex = currentMode === 'mistakes' ? mistakes[currentIndex].index : currentIndex;
        const item = database[itemIndex];
        speakText(item[4].cn);
    }

    function setMode(m, jumpIndex = 0) {
        currentMode = m; 
        currentIndex = jumpIndex; 
        clearInterval(timer);
        document.querySelectorAll('.nav-btns button').forEach(b => b.classList.remove('active-mode'));
        if(document.getElementById('btn-'+m)) document.getElementById('btn-'+m).classList.add('active-mode');
        document.getElementById('timer-display').classList.add('hidden');
        score = 0;
        document.getElementById('score-val').innerText = "0";

        if (m === 'rush') {
            timeLeft = 30;
            document.getElementById('timer-display').classList.remove('hidden');
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer-display').innerText = `00:${timeLeft < 10 ? '0'+timeLeft : timeLeft}`;
                if (timeLeft <= 0) { 
                    clearInterval(timer); 
                    const praises = ["æ—¶é—´åˆ°ï¼", "ä¸é”™å“¦ï¼"];
                    speakText(praises[Math.floor(Math.random()*praises.length)]);
                    setMode('study'); 
                }
            }, 1000);
        }

        if(m === 'list') {
            document.getElementById('main-ui').classList.add('hidden');
            document.getElementById('scroll-view').style.display = 'block';
            renderList();
        } else {
            document.getElementById('main-ui').classList.remove('hidden');
            document.getElementById('scroll-view').style.display = 'none';
            render();
        }
    }

    function generateRubyHtml(text, pinyinStr) {
        const chars = text.split('');
        const pys = pinyinStr.split(' ');
        let html = "";
        let pyIdx = 0;
        chars.forEach(c => {
            if(/[\u4e00-\u9fa5]/.test(c)) {
                html += `<ruby>${c}<rt>${pys[pyIdx] || ''}</rt></ruby>`;
                pyIdx++;
            } else {
                html += c;
            }
        });
        return html;
    }

    function render() {
        const display = document.getElementById('display-area');
        const interaction = document.getElementById('interaction-area');
        const hint = document.getElementById('hint-box');
        display.innerHTML = ""; interaction.innerHTML = ""; hint.classList.add('hidden');

        if (currentMode === 'mistakes' && mistakes.length === 0) {
            display.innerHTML = "<h2 style='text-align:center; color:#d32f2f;'>é”™é¢˜æœ¬ä¸ºç©ºï¼</h2>";
            interaction.innerHTML = `<button class="option-btn" onclick="setMode('study')" style="background:var(--primary); color:white;">è¿”å›å­¦ä¹ æ¨¡å¼</button>`;
            document.getElementById('emoji-display').innerText = "ğŸ“­";
            return;
        }

        const itemIndex = currentMode === 'mistakes' ? mistakes[currentIndex].index : currentIndex;
        const item = database[itemIndex];
        document.getElementById('emoji-display').innerText = item[3];

        if (currentMode === 'study') {
            display.innerHTML = generateRubyHtml(item[0], item[1]) + `<span class="eng-hint">${item[2]}</span>`;
            hint.innerHTML = `<div style="font-size:26px;">${generateRubyHtml(item[4].cn, item[4].py)}</div><div style="font-style:italic; color:#666;">${item[4].en}</div><div style="font-size:12px; color:#999; margin-top:5px; text-align:right;">ğŸ”Š ç‚¹å‡»æœ—è¯»ä¾‹å¥</div>`;
            hint.classList.remove('hidden');
            interaction.innerHTML = `<button class="option-btn" onclick="nextCard()">ä¸‹ä¸€å¼  â†’</button>`;
            speakItem(false); 
        } 
        else if (currentMode === 'review') {
            display.innerHTML = `<h1 style="font-size:80px; cursor:pointer;" onclick="revealReview()">${item[0]}</h1>`;
            interaction.innerHTML = `<p style="text-align:center; color:#888;">ç‚¹å‡»æ±‰å­—æ˜¾ç¤ºè¯¦æƒ…</p>`;
        }
        else {  // quiz, rush, mistakes
            let isSentence = Math.random() > 0.5;
            let isEnToCn = Math.random() > 0.5;
            if (currentMode === 'mistakes') {
                isSentence = mistakes[currentIndex].isSentence;
                isEnToCn = mistakes[currentIndex].isEnToCn;
            }

            let questText, correctAns, speakTarget;
            if (isSentence) {
                questText = isEnToCn ? item[4].en : item[4].cn;  // é—®é¢˜æ˜¾ç¤ºçº¯æ–‡æœ¬ï¼ˆå¸¦æ ‡ç‚¹ï¼‰
                correctAns = isEnToCn ? item[4].cn : item[4].en;
                speakTarget = item[4].cn;
            } else {
                questText = isEnToCn ? item[2] : item[0];
                correctAns = isEnToCn ? item[0] : item[2];
                speakTarget = item[0];
            }

            display.innerHTML = `<h2 style="font-size:36px; text-align:center;">${questText}</h2>`;
            
            let choices = [correctAns];
            while(choices.length < 4) {
                let r = database[Math.floor(Math.random()*database.length)];
                let val;
                if (isSentence) {
                    val = isEnToCn ? r[4].cn : r[4].en;
                } else {
                    val = isEnToCn ? r[0] : r[2];
                }
                if(!choices.includes(val)) choices.push(val);
            }
            choices.sort(() => Math.random() - 0.5);

            choices.forEach(c => {
                const b = document.createElement('button'); b.className = 'option-btn'; b.innerText = c;
                b.onclick = () => {
                    if(c === correctAns) {
                        playEffect('win');
                        speakText(speakTarget);
                        if (currentMode !== 'mistakes') score += 10;
                        document.getElementById('score-val').innerText = score;
                        b.style.background = "#4caf50"; b.style.color = "white"; 

                        if (currentMode === 'mistakes') {
                            mistakes.splice(currentIndex, 1);
                            if (mistakes.length === 0) {
                                setTimeout(() => {
                                    speakText("é”™é¢˜å…¨éƒ¨ç­”å¯¹ï¼å¤ªæ£’äº†ï¼");
                                    setMode('study');
                                }, 800);
                                return;
                            }
                        }
                        setTimeout(nextCard, 800);
                    } else { 
                        playEffect('fail');
                        b.style.background = "#f44336"; b.style.color = "white";
                        if (currentMode !== 'mistakes') {
                            const newMistake = {index: itemIndex, isSentence, isEnToCn};
                            if (!mistakes.some(m => m.index === newMistake.index && m.isSentence === newMistake.isSentence && m.isEnToCn === newMistake.isEnToCn)) {
                                mistakes.push(newMistake);
                            }
                        }
                    }
                };
                interaction.appendChild(b);
            });
        }
    }

    function revealReview() {
        const itemIndex = currentMode === 'mistakes' ? mistakes[currentIndex].index : currentIndex;
        const item = database[itemIndex];
        const display = document.getElementById('display-area');
        const hint = document.getElementById('hint-box');
        display.innerHTML = generateRubyHtml(item[0], item[1]) + `<span class="eng-hint">${item[2]}</span>`;
        hint.innerHTML = `<div style="font-size:26px;">${generateRubyHtml(item[4].cn, item[4].py)}</div><div style="font-style:italic; color:#666;">${item[4].en}</div><div style="font-size:12px; color:#999; margin-top:5px; text-align:right;">ğŸ”Š ç‚¹å‡»æœ—è¯»ä¾‹å¥</div>`;
        hint.classList.remove('hidden');
        speakItem(true);
        document.getElementById('interaction-area').innerHTML = `<button class="option-btn" onclick="nextCard()">ä¸‹ä¸€å¼  â†’</button>`;
    }

    function nextCard() {
        if (currentMode === 'mistakes') {
            currentIndex++;
            if (currentIndex >= mistakes.length) {
                setMode('study');
                return;
            }
        } else {
            currentIndex++;
            if (currentIndex >= database.length) {
                currentIndex = 0;
                const praises = ["ä¸€è½®å®Œæˆï¼å¤ªæ£’äº†ï¼", "ä½ çœŸå‰å®³ï¼", "ç»§ç»­åŠ æ²¹ï¼"];
                speakText(praises[Math.floor(Math.random()*praises.length)]);
            }
        }
        render();
    }

    function renderList() {
        const view = document.getElementById('scroll-view');
        view.innerHTML = "<h2>ğŸ“œ HSK 1 å®Œæ•´è¯æ±‡è¡¨ (150è¯)</h2><p style='color:#666;'>ç‚¹å‡»ä»»æ„è¡Œç›´æ¥å­¦ä¹ è¯¥è¯</p>";
        database.forEach((it, idx) => {
            const r = document.createElement('div'); r.className = 'list-row';
            r.innerHTML = `<div style="min-width:40px; color:#999;">${idx+1}</div>
                <div style="font-size:32px; margin-right:15px;">${it[3]}</div>
                <div style="flex:1;"><b>${it[0]}</b> <span style="color:var(--pinyin);">[${it[1]}]</span><br><small>${it[2]}</small></div>`;
            r.onclick = () => { setMode('study', idx); };
            view.appendChild(r);
        });
    }

    window.onload = () => { initStars(); };
</script>
</body>
</html>